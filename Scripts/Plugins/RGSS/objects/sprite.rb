#==============================================================================
# * RM default Sprite class
#==============================================================================
class Sprite
  #--------------------------------------------------------------------------
  alias init_linker initialize
  def initialize(viewport = nil)
    Cache.link_sprite(self)
    init_linker(viewport)
  end
  #--------------------------------------------------------------------------
  # * Show
  #--------------------------------------------------------------------------
  def show
    self.visible = true
    self
  end
  #--------------------------------------------------------------------------
  # * Hide
  #--------------------------------------------------------------------------
  def hide
    self.visible = false
    self
  end
  #--------------------------------------------------------------------------
  def deactivate
    self.bitmap.clear
    super
  end
  #-----------------------------------------------------------------------------
  # * Query visibility
  #-----------------------------------------------------------------------------
  def visible?
    self.visible
  end
  #-----------------------------------------------------------------------------
  # * Change bitmap to an icon
  #-----------------------------------------------------------------------------
  def draw_icon(icon_index)
    self.bitmap = Bitmap.new(24, 24) if !self.bitmap
    crect = Rect.new(0,0,24,24)
    bitmap.clear_rect(crect)
    rect  = Rect.new(icon_index % 16 * 24, icon_index / 16 * 24, 24, 24)
    self.bitmap.blt(0, 0, Cache.iconset, rect)
  end
  #--------------------------------------------------------------------------
  def moveto(sx, sy)
    self.x, self.y = sx, sy
  end
  #-----------------------------------------------------------------------------
  alias dispose_linker dispose
  def dispose
    Cache.unchain_linker(self)
    dispose_linker
  end
  #-----------------------------------------------------------------------------
end